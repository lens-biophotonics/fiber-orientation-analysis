<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>foa3d.output &mdash; Foa3D 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="https://docs.python.org/3/_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="foa3d.pipeline" href="pipeline.html" />
    <link rel="prev" title="foa3d.odf" href="odf.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Foa3D
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#usage">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Python module index</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="frangi.html">foa3d.frangi</a></li>
<li class="toctree-l2"><a class="reference internal" href="input.html">foa3d.input</a></li>
<li class="toctree-l2"><a class="reference internal" href="odf.html">foa3d.odf</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">foa3d.output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#foa3d.output.create_save_dirs"><code class="docutils literal notranslate"><span class="pre">create_save_dirs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#foa3d.output.save_array"><code class="docutils literal notranslate"><span class="pre">save_array()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#foa3d.output.save_frangi_arrays"><code class="docutils literal notranslate"><span class="pre">save_frangi_arrays()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#foa3d.output.save_odf_arrays"><code class="docutils literal notranslate"><span class="pre">save_odf_arrays()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipeline.html">foa3d.pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessing.html">foa3d.preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="printing.html">foa3d.printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="slicing.html">foa3d.slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="spharm.html">foa3d.spharm</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">foa3d.utils</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Foa3D</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">Python module index</a> &raquo;</li>
      <li>foa3d.output</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/output.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-foa3d.output">
<span id="foa3d-output"></span><h1>foa3d.output<a class="headerlink" href="#module-foa3d.output" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="foa3d.output.create_save_dirs">
<span class="sig-prename descclassname"><span class="pre">foa3d.output.</span></span><span class="sig-name descname"><span class="pre">create_save_dirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cli_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_img</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#foa3d.output.create_save_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Create saving directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cli_args</strong> (<em>see ArgumentParser.parse_args</em>) – updated namespace of command line arguments</p></li>
<li><p><strong>in_img</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) – <dl class="simple">
<dt>input image dictionary</dt><dd><dl class="simple">
<dt>fb_ch: int</dt><dd><p>neuronal fibers channel</p>
</dd>
<dt>bc_ch: int</dt><dd><p>brain cell soma channel</p>
</dd>
<dt>msk_bc: bool</dt><dd><p>if True, mask neuronal bodies within
the optionally provided channel</p>
</dd>
<dt>psf_fwhm: numpy.ndarray (shape=(3,), dtype=float)</dt><dd><p>3D FWHM of the PSF [μm]</p>
</dd>
<dt>px_sz: numpy.ndarray (shape=(3,), dtype=float)</dt><dd><p>pixel size [μm]</p>
</dd>
<dt>path: str</dt><dd><p>path to the 3D microscopy image</p>
</dd>
<dt>name: str</dt><dd><p>name of the 3D microscopy image</p>
</dd>
<dt>fmt: str</dt><dd><p>format of the 3D microscopy image</p>
</dd>
<dt>is_tiled: bool</dt><dd><p>True for tiled reconstructions aligned using ZetaStitcher</p>
</dd>
<dt>is_vec: bool</dt><dd><p>vector field flag</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>save_dirs</strong> –</p>
<p>saving directories</p>
<blockquote>
<div><p>frangi: Frangi filter</p>
<p>odf: ODF analysis</p>
<p>tmp: temporary data</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="foa3d.output.save_array">
<span class="sig-prename descclassname"><span class="pre">foa3d.output.</span></span><span class="sig-name descname"><span class="pre">save_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nd_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">px_sz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tiff'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#foa3d.output.save_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Save array to file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>string</em>) – output filename</p></li>
<li><p><strong>save_dir</strong> (<em>string</em>) – saving directory string path</p></li>
<li><p><strong>nd_array</strong> (<em>NumPy memory-map object</em><em> or </em><em>HDF5 dataset</em>) – data</p></li>
<li><p><strong>px_sz</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a>) – pixel size (Z,Y,X) [um]</p></li>
<li><p><strong>fmt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – output format</p></li>
<li><p><strong>ram</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – maximum RAM available</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="foa3d.output.save_frangi_arrays">
<span class="sig-prename descclassname"><span class="pre">foa3d.output.</span></span><span class="sig-name descname"><span class="pre">save_frangi_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#foa3d.output.save_frangi_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the output arrays of the Frangi filter stage to TIF files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – saving directory string path</p></li>
<li><p><strong>img_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – name of the input microscopy image</p></li>
<li><p><strong>out_img</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) – <dl class="simple">
<dt>fbr_vec: NumPy memory-map object (axis order=(Z,Y,X,C), dtype=float32)</dt><dd><p>fiber orientation vector field</p>
</dd>
<dt>fbr_vec_clr: NumPy memory-map object (axis order=(Z,Y,X,C), dtype=uint8)</dt><dd><p>orientation colormap image</p>
</dd>
<dt>fa_img: NumPy memory-map object (axis order=(Z,Y,X), dtype=uint8)</dt><dd><p>fractional anisotropy image</p>
</dd>
<dt>frangi_img: NumPy memory-map object (axis order=(Z,Y,X), dtype=uint8)</dt><dd><p>Frangi-enhanced image (fiber probability)</p>
</dd>
<dt>iso_fbr: NumPy memory-map object (axis order=(Z,Y,X), dtype=uint8)</dt><dd><p>isotropic fiber image</p>
</dd>
<dt>fbr_msk: NumPy memory-map object (axis order=(Z,Y,X), dtype=uint8)</dt><dd><p>fiber mask image</p>
</dd>
<dt>bc_msk: NumPy memory-map object (axis order=(Z,Y,X), dtype=uint8)</dt><dd><p>neuron mask image</p>
</dd>
<dt>px_sz: numpy.ndarray (shape=(3,), dtype=float)</dt><dd><p>pixel size (Z,Y,X) [μm]</p>
</dd>
</dl>
</p></li>
<li><p><strong>ram</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – maximum RAM available</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="foa3d.output.save_odf_arrays">
<span class="sig-prename descclassname"><span class="pre">foa3d.output.</span></span><span class="sig-name descname"><span class="pre">save_odf_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odf_scale_um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">px_sz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fbr_dnst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odi_pri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odi_sec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odi_tot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odi_anis</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#foa3d.output.save_odf_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the output arrays of the ODF analysis stage to TIF and Nifti files.
Arrays tagged with ‘mrtrixview’ are preliminarily transformed
so that ODF maps viewed in MRtrix3 are spatially consistent
with the analyzed microscopy volume, and the output TIF files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – saving directory string path</p></li>
<li><p><strong>img_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – name of the 3D microscopy image</p></li>
<li><p><strong>odf_scale_um</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – fiber ODF resolution (super-voxel side [μm])</p></li>
<li><p><strong>px_sz</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><em>numpy.ndarray</em></a><em> (</em><em>shape=</em><em>(</em><em>3</em><em>,</em><em>)</em><em>, </em><em>dtype=float</em><em>)</em>) – pixel size (Z,Y,X) [μm]</p></li>
<li><p><strong>odf</strong> (<em>NumPy memory-map object</em><em> (</em><em>axis order=</em><em>(</em><em>X</em><em>,</em><em>Y</em><em>,</em><em>Z</em><em>,</em><em>C</em><em>)</em><em>, </em><em>dtype=float32</em><em>)</em>) – ODF spherical harmonics coefficients</p></li>
<li><p><strong>bg</strong> (<em>NumPy memory-map object</em><em> (</em><em>axis order=</em><em>(</em><em>X</em><em>,</em><em>Y</em><em>,</em><em>Z</em><em>)</em><em>, </em><em>dtype=uint8</em><em>)</em>) – background for ODF visualization in MRtrix3</p></li>
<li><p><strong>fbr_dnst</strong> (<em>NumPy memory-map object</em><em> (</em><em>axis order=</em><em>(</em><em>Z</em><em>,</em><em>Y</em><em>,</em><em>X</em><em>)</em><em>, </em><em>dtype=float32</em><em>)</em>) – fiber orientation density [1/μm³]</p></li>
<li><p><strong>odi_pri</strong> (<em>NumPy memory-map object</em><em> (</em><em>axis order=</em><em>(</em><em>Z</em><em>,</em><em>Y</em><em>,</em><em>X</em><em>)</em><em>, </em><em>dtype=float32</em><em>)</em>) – primary orientation dispersion parameter</p></li>
<li><p><strong>odi_sec</strong> (<em>NumPy memory-map object</em><em> (</em><em>axis order=</em><em>(</em><em>Z</em><em>,</em><em>Y</em><em>,</em><em>X</em><em>)</em><em>, </em><em>dtype=float32</em><em>)</em>) – secondary orientation dispersion parameter</p></li>
<li><p><strong>odi_tot</strong> (<em>NumPy memory-map object</em><em> (</em><em>axis order=</em><em>(</em><em>Z</em><em>,</em><em>Y</em><em>,</em><em>X</em><em>)</em><em>, </em><em>dtype=float32</em><em>)</em>) – total orientation dispersion parameter</p></li>
<li><p><strong>odi_anis</strong> (<em>NumPy memory-map object</em><em> (</em><em>axis order=</em><em>(</em><em>Z</em><em>,</em><em>Y</em><em>,</em><em>X</em><em>)</em><em>, </em><em>dtype=float32</em><em>)</em>) – orientation dispersion anisotropy parameter</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="odf.html" class="btn btn-neutral float-left" title="foa3d.odf" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipeline.html" class="btn btn-neutral float-right" title="foa3d.pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Michele Sorelli.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>